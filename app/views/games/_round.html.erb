<%= turbo_frame_tag dom_id(game, "round_#{idx}") do %>
  <h3>Ronda <%= idx + 1 %> (<%= round.cards_dealt %> <%= round.cards_dealt == 1 ? "carta" : "cartas" %>)</h3>

  <table>
    <thead>
      <tr>
        <th>Jugador</th>
        <th>Pedidas</th>
        <th>Hechas</th>
        <th>Puntos</th>
      </tr>
    </thead>
    <tbody>
      <% round.players_in_order.each do |player| %>
        <% forbidden = round.bidding? && !round.bids[player] ? round.forbidden_number : nil %>
        <tr>
          <td><%= player %></td>
          <td>
            <%= render "picker",
              name: "asked",
              value: round.bids[player],
              max: round.cards_dealt,
              forbidden: forbidden,
              game: game,
              round_idx: idx,
              player: player %>
          </td>
          <td>
            <%= render "picker",
              name: "made",
              value: round.tricks_won[player],
              max: round.cards_dealt,
              game: game,
              round_idx: idx,
              player: player %>
          </td>
          <td><%= round.points_for(player) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <% if round.complete? %>
    <p>
      Total pedidas: <%= round.total_bids %> / <%= round.cards_dealt %>
      <%= round.valid? ? "âœ…" : "âŒ" %>
    </p>
  <% elsif round.bidding? %>
    <p>ğŸ—£ï¸ Pidiendo - esperando a <%= round.current_bidder %></p>
  <% elsif round.playing? %>
    <p>ğŸƒ Jugando - registrar bazas</p>
  <% end %>
<% end %>
